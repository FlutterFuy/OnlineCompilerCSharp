<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Онлайн Компилятор C#</title>
  <style>
    :root {
      --bg-color: #f0f0f0;
      --text-color: #333;
      --accent-color: #6200ee;
      --button-bg: #6200ee;
      --button-text: #fff;
    }
    body.dark {
      --bg-color: #121212;
      --text-color: #e0e0e0;
      --accent-color: #bb86fc;
      --button-bg: #bb86fc;
      --button-text: #121212;
    }
    body {
      margin: 0;
      padding: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background-color: var(--accent-color);
      color: var(--button-text);
    }
    .container {
      display: flex;
      flex-direction: column;
      padding: 1rem;
    }
    .editor {
      width: 100%;
      min-height: 300px;
      font-family: monospace;
      font-size: 16px;
      padding: 1rem;
      border: 2px solid var(--accent-color);
      border-radius: 5px;
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: background-color 0.3s ease, color 0.3s ease;
      resize: vertical;
    }
    .controls {
      margin-top: 1rem;
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
    }
    button {
      padding: 0.5rem 1rem;
      background-color: var(--button-bg);
      color: var(--button-text);
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    button:hover {
      opacity: 0.8;
    }
    .output {
      margin-top: 1rem;
      padding: 1rem;
      border: 2px solid var(--accent-color);
      border-radius: 5px;
      background-color: var(--bg-color);
      color: var(--text-color);
      white-space: pre-wrap;
      min-height: 150px;
    }
    .theme-toggle {
      cursor: pointer;
      background: none;
      border: none;
      font-size: 1.2rem;
      color: var(--button-text);
    }
  </style>
</head>
<body>
  <header>
    <h1>Онлайн Компилятор C#</h1>
    <button class="theme-toggle" id="themeToggle">Сменить тему</button>
  </header>
  <div class="container">
    <textarea id="codeEditor" class="editor">// Напишите ваш C# код здесь
using System;

public class Program {
    public static void Main() {
        Console.WriteLine("Hello, World!");
    }
}</textarea>
    <div class="controls">
      <button id="compileBtn">Компилировать</button>
    </div>
    <div id="output" class="output">Вывод результатов компиляции...</div>
  </div>
  <script>
    // Переключение темы
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
    });

    // Обработка компиляции C# кода через JDoodle API
    const compileBtn = document.getElementById('compileBtn');
    const codeEditor = document.getElementById('codeEditor');
    const output = document.getElementById('output');

    compileBtn.addEventListener('click', () => {
      const code = codeEditor.value;
      output.textContent = "Компиляция и выполнение...";

      // Замените значения clientId и clientSecret на свои (полученные на сайте JDoodle)
      const clientId = "your_client_id";
      const clientSecret = "your_client_secret";
      const endpoint = "https://api.jdoodle.com/v1/execute";

      const payload = {
        script: code,
        language: "csharp",
        versionIndex: "0", // измените при необходимости
        clientId: clientId,
        clientSecret: clientSecret
      };

      fetch(endpoint, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      })
        .then(response => response.json())
        .then(data => {
          // Вывод результата выполнения кода
          output.textContent = data.output;
        })
        .catch(error => {
          console.error("Ошибка:", error);
          output.textContent = "Произошла ошибка при компиляции.";
        });
    });
  </script>
</body>
</html>
